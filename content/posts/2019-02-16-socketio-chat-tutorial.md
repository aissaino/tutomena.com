---
title: 'ุจูุงุก ุชุทุจูู ุบุฑูุฉ ุฏุฑุฏุดุฉ ุจุงุณุชุฎุฏุงู Socket.io ู React.js'
date: '2019-02-16'
slug: 'web-development/javascript/socketio-chat-tutorial'
template: 'post'
categories:
  - ุฌุงูุงุณูุฑูุจุช
tags:
  - javascript
  - Socket.io
  - websockets
thumbnail: '../thumbnails/react.png'
---

ุฃูุฌุฒูุง ูู ุฏุฑุณ ุณุงุจู [ููุฏูุฉ ูุดุฑุญุง ูููุชุจุฉ Socket.io](https://www.tutomena.com/web-development/javascript/introduction-socketio-library/) ูุฅูุดุงุก ุชุทุจููุงุช ุงูููุจ ุงูุชุฒุงูููุฉุ ุฃู ูุง ูุนุฑู ูุฐูู **ุจุชุทุจููุงุช ุงูุฒูู ุงูุญูููู** Real-time Applicationsุยูุญุงููุช ุฃู ุฃุชุทุฑู ููู ูุนุฏุฏ ูู ุงูุชูุงุตูู ูุงูุฃููุฑ ุงูุชู ุณุชุณุงุนุฏ ุงูุฌููุน ุนูู ููู ูุงุณุชูุนุงุจ ุขููุฉ ุนูู ูุฐู ุงูููุชุจุฉ ูุฏูุฑูุง.

ุงูููู ุณูุชุนูู ูุนุง ููููุฉ ุงุณุชุฎุฏุงู **Socket.io** ูู ูุซุงู ุนููู ุญูููู ุนุจุงุฑุฉ ุนู ุชุทุจูู **ุบุฑูุฉ ุฏุฑุฏุดุฉ** (Chat Room)ุ ููุฐุง ูุง ูุนุฏุชูู ุจู ูู ููุงูุฉ ุงูุฏุฑุณ ุงูุณุงุจู :)

ุฅูู ุฌุงูุจ Socket.ioุ ุณูููู ุจุงุณุชุฎุฏุงู [Node.js](https://www.tutomena.com/web-development/javascript/what-is-nodejs/) ูู ูุฐุง ุงูุฏุฑุณ ูุจูุงุก ุงูุฎุงุฏูุ ุจูููุง ุณููุฌุฃ [ูููุชุจุฉ React.js](https://www.tutomena.com/web-development/javascript/react-javascript-library/) ูู ุฌูุฉ ุงูุนููู ุฃู ุงููุชุตูุญ.

## ุงูุฎุทูุฉ ุงูุฃููู

ุฃููุง ุณูููู ุจุฅูุดุงุก ูุฌูุฏุง ูุณููู ูุซูุง react-sockeio-chatroom ูุจุฏุงุฎูู ูุฌูุฏูู ุงุซููู:

- client:ยูุฐุง ุงููุฌูุฏ ุณูุถู ุงูููุฏ ุงูุฎุงุต ุจุงููุชุตูุญ (React.js).
- server: ุจูููุง ูุฐุง ุงููุฌูุฏ ุณูุถุน ููู ุงูููุฏ ุงูุฎุงุต ุจุงูุฎุงุฏู (Node.js).

## ุงูุฎุทูุฉ ุงูุซุงููุฉ

ุณูุจุฏุฃ ุจุงูุฎุงุฏูุ ูุฐูู ุณูุฏุฎู ุฅูู ุงููุฌูุฏ server ูู ูุงูุฐุฉ ุงูุฃูุงูุฑ ุงูุณุทุฑูุฉ ุซู ูููู ุจุชููุฆุฉ ููู `package.json` ููุง ููู:

```bash
npm init -y
```

ุจุนุฏูุง ูููู ุจุชุซุจูุช ุญุฒูุฉ **socket.io** ูุฅุทุงุฑ ุงูุนูู Expressุ ูุฐุง ุงูุฃุฎูุฑ ูุง ูุนุฏ ุงุณุชุนูุงูู ุถุฑูุฑูุง ูู ูุฐุง ุงูุฏุฑุณ ูููููู ุฃุฑุฏุช ุงุณุชุฎุฏุงูู ุญุชู ูุชุนูุฏ ุนูููุ ูุฃูู ููุง ุชุนูููู [ุฅุทุงุฑ ุนูู Node.js ุงูุฃุดูุฑ ูุงูุฃูุซุฑ ุงุณุชุฎุฏุงูุง](https://www.tutomena.com/web-development/javascript/most-popular-nodejs-web-frameworks/) ูุจูุงุก ุฎูุงุฏู ุงูููุจ.

```bash
npm install socket.io express
```

> ุจูุง ุฃููุง ูุณุชุฎุฏู ูุฏูุฑ ุงูุญุฒู npmุ ููุฐุง ูุนูู ุฃู Node.js ูุซุจุช ูู ุฌูุงุฒูุ ูุฅูุง ูุฅู ุฃูุงูุฑ npm ูู ุชุนูู ๐

ุจุนุฏ ุชุญููู socket.io ูุฅูุณุจุฑูุณุ ุณูููู ุจุชุญููู ุญุฒูุฉ ุซุงููุฉ ุฎุงุตุฉ ุจูุฑุญูุฉ ุงูุชุทููุฑ (Developement) ููู **nodemon**. ูุฐู ุงูุญุฒูุฉ ููุง ุฐูุฑุช ูู ุนุฏุฉ ููุงูุงุช ุณุงุจูุฉยุงุฎุชูุงุฑูุฉ ูููููุง ุชุณุงุนุฏูุง ูุซูุฑุง ููุทูุฑูู ุญูุซ ุชููู ุจุฅุนุงุฏุฉ ุชุดุบูู (Restart) ุฎุงุฏู Node.js **ุชููุงุฆูุง** ูุน ูู ุชุบููุฑ ูู ุฃุญุฏ ูููุงุชู.

```bash
npm install nodemon --save-dev
```

ุงูุขู ูุฌุจ ุฃู ููุดุฆ ููู ุฌุงูุงุณูุฑูุจุช ุงูุฐู ุณูุถุน ููู ุฃููุงุฏูุง ุงูุฎุงุตุฉุ ูููู ุงุณูู server.jsยููููุชุจ ููู ูุง ููู:

```js
const app = require('express')();

const server = app.listen(8081, function(res) {
  console.log('Server is running');
});

const socket = require('socket.io');

const io = socket(server);

io.on('connection', function(socket) {
  socket.on('SEND_MESSAGE', function(data) {
    io.emit('RECEIVE_MESSAGE', data);
  });
});
```

ูุงุญุธูุง ุฃููุง ูู ููู ุจุงูุดูุก ุงููุซูุฑ ูู ูุฐุง ุงููููุ ููุท ุฃูุดุฃูุง ุฎุงุฏู ุจูุงุณุทุฉ Express ูุจุนุฏูุง ุฃุถููุง ุฅููู Socket.io.

ุจุนุฏ ุฃู ูุญุฏุซ ุงุชุตุงู ูู ุฃุญุฏ ุงูุนููุงุกุ ุทูุจูุง ูู Socket.io ุฃู ูููู ุจุงูุฅุณุชูุงุน ูุฑุณุงูุฉ ูู ููุน **SEND_MESSAGE** ูุชููุน ุฃู ุชุฃุชู **ูู ุฌูุฉ ุงูุนููู**ุ ูุนูุฏ ูุตูููุง ุณูููู ุจุฏูุฑู ุจุฅุฑุณุงู ุฑุณุงูุฉ ูู ููุน **RECEIVE_MESSAGE** ุฅูู **ุฌููุน ุงูุนููุงุก ุงููุชุตููู** (ุงููุชูุงุฌุฏูู ูู ุบุฑูุฉ ุงูุฏุฑุฏุดุฉ) ููุญุชูู ูุฐู ุงูุฑุณุงูุฉ (data) ุณูููู ูู ุงูุฑุณุงูุฉ ุงูุชู ูุงู ุงูุนูููยุงูุฃูู ุจุฅุฑุณุงููุง ุนู ุทุฑูู **SEND_MESSAGE**.

ุฃุชููู ุฃู ุชููู ุงูุฃููุฑ ูุงุถุญุฉ :)

ุชูุงุญุธูู ุฃู ุงูุฎุงุฏู ุงุณุชุฎุฏู `io.emit()` ุนูุถุง ุนู `socket.emit()`ุ ูุงูุฃููู ุชููู ุจุงูุฅุฑุณุงู **ูุฌููุน ุงูุนููุงุก ุงููุชุตููู** (ูุฐุง ูุง ูุฑูุฏู)ุ ุจูููุง ุงูุซุงููุฉ ุชุฑุณู **ููุท ููุนููู** ุงูุฐู ุฃุฑุณู ุงูุฑุณุงูุฉ SEND_MESSAGE ุฅูู Server.

## ุงูุฎุทูุฉ ุงูุซุงูุซุฉ

ุงูุขู ุจุนุฏูุง ุฃุนุฏุฏูุง ุงูุฎุงุฏู ุงูุฎุงุต ุจุชุทุจูููุงุ ุณููุฑ ุฅูู ุงูุฌูุฉ ุงูุฃุฎุฑู: **ุฌูุฉ ุงููุชุตูุญ** (ุงูุนููู) :)

ุณููุชุญ ุชุจููุจุง ุฌุฏูุฏุง ูู Terminal ูููู ูุฏุฎู ุฅูู ุงููุฌูุฏ client ุงูุฐู ุฃูุดุฃูุงู ุณุงุจูุง.

ุจุนุฏ ุฐูู ุณูููู ุจุฅูุดุงุก ูุดุฑูุน React.js ุนู ุทุฑูู ุงูุญุฒูุฉ [create-react-app](https://github.com/facebook/create-react-app).ยุฅุฐุง ูู ุชูู ุจุชุซุจูุชูุง ูู ูุจู ููุฐุง ูู ุงูููุช ุงูููุงุณุจ ููุนู ุฐูู :)

```bash
create-react-app .
```

ุงูููุทุฉ ููุง ุชุนูู ุจุฃู ุญุฒูุฉ **cra** ุณุชููู ุจุฅูุดุงุก ุงููุดุฑูุน ูู ุงููุฌูุฏ client ูุจุงุดุฑุฉุ ุฃูยุฃููุง ูู ุชููู ุจุฅูุดุงุก ูุฌูุฏ ุฌุฏูุฏ.

ุจุนุฏ ุชูููุฏ ุงููุดุฑูุนุ ูู ุงูููุชุฑุถ ุฃู ูููู ูุฏููุง 3 ูุฌูุฏุงุช : **public**ยุ**node_modules** ู **src**. ุนูููุง ุณูููู ุฏุงุฎู ูุฐุง ุงูุฃุฎูุฑุ ูุฐูู ุณูุฏุฎู ุฅููู ููููู ุจุญุฐู ุฌููุน ุงููููุงุช ุงูุฅูุชุฑุงุถูุฉ ุงูุชู ูุถููุง **ุจุงุณุชุซูุงุก** ุงูููููู : index.js ู App.js.

ุงูููู **index.js** ุณูููู ูุญุชูุงู ููุง ููู:

```js
import React from 'react';
import ReactDOM from 'react-dom';
import App from './App';

ReactDOM.render(<App />, document.getElementById('root'));
```

ูุฐุง ุงูููุฏ ูุง ูุญุชุงุฌ ููุดุฑุญ ุนูู ูุง ุฃุธูุ ููุท ุทูุจูุง ูู React ุฃู ุชููู ุจุชุฑููุจ ุงููููู `<App>` ููยุงูุนูุตุฑ ุงูุฐู ูุญูู ุงููุญุฏุฏ root.

ูุฐุงยุงูุนูุตุฑ (div) ุณุชุฌุฏููู ูู ุงูููู index.html ุงูููุฌูุฏ ูู ุงููุฌูุฏ public ุฅุฐุง ุฃุฑุฏุชู ุงูุชุฃูุฏ :)

ุงูููู ุงูุฐู ููููุง ุจุงูุฏุฑุฌุฉ ุงูุฃููู ูู ูุดุฑูุน React ูู **App.js** ูุฃูู ูู ุงูุฐู ุณูุถู ุงูุฃููุงุฏ ุงูุฎุงุตุฉ ุจูุธุงู ุงูุฏุฑุฏุดุฉ.ยูุฐุง ูุนูู ุจุฃูู ุงูููู ุงูุฐู ุณูุณุชุฎุฏู ููู ููุชุจุฉ Socket.io **ุงูุฎุงุตุฉ ุจุฌูุฉ ุงูุนููู**.

ููุง ุจูุง ุฅุฐูุ ูููู ุจุชุญููููุง:

```bash
npm install socket.io-client
```

ุจุนุฏ ุชุญููู ุงูููุชุจุฉุ ุณููุชุญ ุงูููู App.js ููุถุน ููู ูุฐู ุงูุดูุฑุฉ:

```js
import React, { Component } from 'react';

import io from 'socket.io-client';

class App extends Component {
  constructor(props) {
    super(props);

    this.state = {
      username: '',
      message: '',
      messages: []
    };

    this.socket = io('localhost:8081');

    this.socket.on('RECEIVE_MESSAGE', data => {
      this.setState({
        messages: [...this.state.messages, data]
      });
    });
  }

  handleChange = e => {
    this.setState({
      [e.target.name]: e.target.value
    });
  };

  handleSubmit = () => {
    this.socket.emit('SEND_MESSAGE', {
      author: this.state.username,
      message: this.state.message
    });

    this.setState({ message: '' });
  };

  render() {
    return (
      <div>
        <ul>
          {this.state.messages.map(item => {
            return (
              <li>
                {item.author} : {item.message}
              </li>
            );
          })}
        </ul>

        <input
          type="text"
          name="username"
          value={this.state.username}
          onChange={this.handleChange}
        />

        <input
          type="text"
          name="message"
          value={this.state.message}
          onChange={this.handleChange}
        />

        <button onClick={this.handleSubmit}>Send</button>
      </div>
    );
  }
}

export default App;
```

ููุง ุชุดุงูุฏููุ ูู ูุฐุง ุงูููู ูููุง ุจุฅูุดุงุก ูููู ุงุณูู **App** ูุงูุฐู ุงุณุชุฏุนููุงู ุณุงุจูุง ูู ุงูููู index.jsุยููู constructor ุงูุฎุงุต ุจู ูููุง ุจุชุนุฑูู **State** ููู ุนุจุงุฑุฉ ุนู ูุงุฆู ุฌุงูุงุณูุฑูุจุช ูุถู 3 ุฎุงุตูุงุช: message ุusername ู messages.

- **username**:ยุงุณู ุงููุณุชุฎุฏู.
- **message**: ุงูุฑุณุงูุฉ ุงูุชู ูููู **ุงููุฏุฑุฏุด** ุจุฅุฑุณุงููุง.
- **messages**:ยูุตูููุฉ ุชุถู ูุฌููุน ุงูุฑุณุงุฆู ุงูุชู ุชุจุงุฏููุง ุฃุนุถุงุก ุบุฑูุฉ ุงูุฏุฑุฏุดุฉ ูููุง ุจูููู.

ุจุนุฏ ุชุนุฑูู ุญุงูุฉ ุงูููููุ ูููุง ุจุงูุฅุชุตุงู ุจุฎุงุฏู Socket.io ุนู ุทุฑูู ุงูุฎุงุตูุฉ _this.socket_.

ุจุนุฏูุง ุงูุฅุชุตุงู ุจุงูุฎุงุฏูุ ููู ุฏุงุฎู ูุธููุฉ ุงูุจูููุงุก (constructor) ุฏุงุฆูุงุ ุทูุจูุง ูู this.socket ุฃู ูููู ุจุงูุฅุณุชูุงุน ููุญุฏุซ **RECEIVE_MESSAGE** ุงูุฐู ููุชุธุฑ ูุฏููู ูู ุงูุฎุงุฏู ููุง ุฑุฃููุง ูู ููุฑุฉ ุณุงุจูุฉ.

ุนูุฏ ูููุน ูุฐุง ุงูุญุฏุซ ุณูููู ุจุชุญุฏูุซ ุญุงูุฉ ุงููููู `<App>` ูุฐูู ุจุฅุถุงูุฉ ุงูุจูุงูุงุช ุงูุชู ุฃุฑุณููุง ุงูุฎุงุฏู ุฅูู ุงููุตูููุฉ **messages**. ูุฐู ุงูุจูุงูุงุช ููุง ุณูุฑู ุจุนุฏ ูููู ุนุจุงุฑุฉ ุนู ูุงุฆู ุฌุงูุงุณูุฑูุจุช ูุถู **ุงุณู ุงููุณุชุฎุฏู ููุถููู ุฑุณุงูุชู**.

ุณูุฎุฑุฌ ุงูุขู ูู constructorุ ูููุฒู ููููุง ุฅูู ุงููุธููุฉ `render()` ุงูุชู ุชููู ุจุฅุฑุฌุงุน ุงู UI ุงูุฎุงุต ุจ `<App>`.

ูุฐุง UI ุจุณูุท ููุบุงูุฉ:

- ุนูุตุฑ `<ul>` ูุนุฑุถ ูู ุฎูุงูู ุงูุฑุณุงุฆู ุงูุชู ุชุฃุชู ูู ุงูุฎุงุฏู ูู ุฎูุงู ุงููุตูููุฉ _this.state.messages_. ูููุง ุฑุฃููุง ูุจู ููููุ ูููุง ุฃุฑุณู ุงูุฎุงุฏู ุฑุณุงูุฉ RECEIVE_MESSAGE ุฅูู ุงูุนููู ูููู ุงูุฃุฎูุฑ ุจุฅุถุงูุชูุงยูุญุชูุงูุง (data) ุฅูู messages.
- ุญูููู ูู ููุน `<input>`ุ ุฃุญุฏููุง ูุฏุฎู ููู ุงุณู ุงููุณุชุฎุฏู ูุงูุขุฎุฑ ุฑุณุงูุชูุง.
- ุฒุฑ `<button>` ุนูุฏ ุงูููุฑ ุนููู ูููู ุจุชูููุฐ ุงููุธููุฉ **()handleSubmit** ุงูุชู ุชููู ุจุฅุฑุณุงู ุฑุณุงูุฉ ูู ููุน **SEND_MESSAGE**ยุฅูู ุงูุฎุงุฏู ูุชุถู **ุงุณู ุงููุณุชุฎุฏู** ุงูุฐู ุฃุฏุฎููุงู **ูุงูุฑุณุงูุฉ** ุงูุชู ูุชุจูุงูุง.

ุงูุขู ูููููุง ุชุดุบูู ูู ูู ุงูุฎุงุฏู (ุงููุฌูุฏ server) ููุดุฑูุน React (ุงููุฌูุฏ client) ุนู ุทุฑูู ุงูุฃูุฑ:

```bash
npm start
```

ุจุนุฏูุง ุณููุชุญ ุงูุฑุงุจุทยhttp://localhost:3000 ุงูุฎุงุต ุจุงูุนููู (ูุดุฑูุน React.js) ูู **ุชุจููุจูู** ุฃู ุฃูุซุฑ ูู ุงููุชุตูุญ ุญุชู ูููู ุจูุญุงูุงุฉ ุบุฑูุฉ ุงูุฏุฑุฏุดุฉ.

ุงููุชูุฌุฉ ููุง ูู ุงูุตูุฑุฉ ุฃุณููู :)

[![](../images/chatroom-example.png)](../images/chatroom-example.png)

ุงูุดุงุช ูุนูู ุจุดูู ุฌูุฏย๐

## ุงูููุงูุฉ

ููุฐุง ูููุง ุจุฅูุดุงุก ูุธุงู ุจุณูุท ููุฏุฑุฏุดุฉ ุจุงุณุชุฎุฏุงู Node.js ุSocket.io ู React.js.

ุงููุซุงู ุจุณูุท ููุบุงูุฉ ููููู ุจูุง ุดู ูุนุทููุง ููุฑุฉ ุฌูุฏุฉ ุนู ูุฏุฑุงุช Socket.io ูููุนูุฉ ุงูุชุทุจููุงุช ุงูุชู ูููููุง ุจูุงุคูุง ุจูุงุณุทุฉ ุชูู ุงูููุชุจุฉ.

> ูุง ุชุชุฑุฏุฏูุง ูู ูุดุงุฑูุฉ ุงูุทุจุงุนุงุชูู ูููุงุญุธุงุชูู ุญูู ุงูููุถูุน ูุนู ููุน ุฒูุงุฑ ูุฏููุฉ ุชูุชููููุงุ ุนูููุง ุนูููุง ูููู

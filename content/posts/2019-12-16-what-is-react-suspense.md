---
title: 'ูุง ูู Suspense ุ ูููุงุฐุง ูู ูุดุฑูุน ููู ุจุงููุณุจุฉ ูููุชุจุฉ React.js ุ'
date: 2019-12-16
slug: 'react-suspense'
template: 'post'
categories:
  - ุจุฑูุฌุฉ
  - ุฌุงูุงุณูุฑูุจุช
tags:
  - React.js
  - Suspense
  - Concurrent Mode
thumbnail: '../thumbnails/react.png'
---

ูู [ูุคุชูุฑ ุฌุงูุงุณูุฑูุจุช](https://www.youtube.com/watch?v=nLF0n9SACd4) (JsConf) ุงูุฐู ุงูุนูุฏ ุจุฅูุณููุฏุง ุนุงู 2018ุ ูุงู ุงููุชุญุฏุซ Dan Abramov - ุฃุญุฏ ุงููููุฏุณูู ุงูุจุงุฑุฒูู ูู ูุฑูู **React.js** - ุจุงุณุชุนุฑุงุถ ููุฒุฉ ุฌุฏูุฏุฉ ูุชู ุงูุฅุดุชุบุงู ุนูููุง ูุฌุนู ุงูุนุฑุถ ุงูุบูุฑ ูุชุฒุงูู ููููููุงุช ูููุฉ ุฃุณูู ูุฃูุซุฑ ุชุตุฑูุญูุฉ (More Declarative).

ููุฑุฉ ูุฐุง ุงูููุท ุงูุฌุฏูุฏ ุชููู ูู ุฅุญุงุทุฉ ุงููููู ุงูุบูุฑ ูุชุฒุงูู ุจูููู ุขุฎุฑ ุณูุงู **ุฏุงู ุฃุจุฑุงููู** ุขูุฐุงู ุจ `Placeholder`. ูุฐุง ุงูุฃุฎูุฑ ููุจู ุฎุงุตูุฉ ุงุณููุง `fallback` ุจุญูุซ ูุชู ุนุฑุถ ูุญุชูุงูุง ูู ุทุฑู `<Placeholder />` ูู ุงูุชุธุงุฑ ุชุญููู ูุชุฌููุฒ ูุงูุฉ ุงูุจูุงูุงุช ุงูุบูุฑ ูุชุฒุงููุฉ ุงูุชู ูุญุชุงุฌุงูุง ุงููููู ุงููุญุงุท.

ุจุนุฏ ุฃูุซุฑ ูู ุนุงู ุนูู ุฐูู ุงููุคุชูุฑุ ุชูุฏูุช ุงูุฃุดุบุงู ูุซูุฑุง ูู ูุฐุง ุงููุดุฑูุน ูุฃุตุจุญ ูุนุฑู ุจุงุณู **React Suspense**. ูุฅุฐุง ููุช ูู ูุชุงุจุนู ุฃุฎุจุงุฑ React.js ููุง ุดู ุจุฃูู ุณูุนุช ุนู ูุฐุง ุงููุตุทูุญ ูุฑุงุช ุนุฏูุฏุฉ ูู ุงูุดููุฑ ุงูุฃุฎูุฑุฉ.

ููุน ูุซุฑุฉ ุงูุญุฏูุซ ุนู **Suspense** ูุชุณุงุกู ุงููุฑุก ุนู ุณุจุจ ูู ูุฐุง ุงูุฅูุชูุงู ุจูุฐู ุงูููุฒุฉ ุงูุฌุฏูุฏุฉุ ููู ูู ูุนูุง ุชุณุชุญู ูู ุชูู ุงูุฌูุจุฉ ุงูุชู ุฃุญุฏุซุช ุญูููุง ุ

ูุฐู ุงูุชุฏูููุฉ ุงูููุตูุฉ ุณุชุฌูุจูุง ุฅู ุดุงุก ุงููู ุนูู ูู ูุฐู ุงูุฃุณุฆูุฉุ ูุณูุนุฑู ูุนุง ูุงููุฉ ูุฐุง ุงูุฅุณู ุงูุฌุฏูุฏ ูู ุนุงูู React.js.

## ุชูุถูุญ ูุง ุจุฏ ููู

ุจุณุจุจ ุฃูููุฉ ูุดุฑูุน ูููุฑุฉ React Suspenseุ ูุฅู ุงููุงุฆููู ุนููู ูุฑุฑูุง ุชูุณููู ุฅูู ูุณููู ุงุซููู:

- ูุณู **ููุชู ููุท ุจุงูุฅุณุชูุฑุงุฏ ุงูุฏููุงูููู** ูููููุงุช React ุฃู ูุง ูุนุฑู ุจ Dynamic Importุ ูุงูุบุฑุถ ูู ูุฐุง ุงูุฌุฒุก ูู ุฌุนู ุงูุดูุฑุฉ ุงููุตุฏุฑูุฉ ููุชุทุจูู ุตุบูุฑุฉ ุงูุญุฌู ูุฏุฑ ุงููุณุชุทุงุน ุจุญูุซ ูุง ูุชู ุชุญููู ุฃู ุชุถููู ุงูุฃููุงุฏ ุงููุณุคููุฉ ุนู ุงูููููุงุช (Components) ุงูุชู ูุง ุชุธูุฑ ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูู ููู ุฌุงูุงุณูุฑูุจุช ุงูุฑุฆูุณู ูููููุน.

  Suspense ุณูุชููู ุชุญููู ุชูู ุงูุฃููุงุฏ ุนูุฏ ุงูุญุงุฌุฉ ููุทุ ุฃู ุนูุฏูุง ูุญูู ุงูููุช ูุนุฑุถูุง ูู User Interfaceุ ูุฐูู ุจุงูุชุนุงูู ูุน ูุธููุฉ ุฃุฎุฑู ูู ูุธุงุฆู React ููู `React.lazy()`.

  ุชุนุฑู ูุฐู ุงูุฎุงุตูุฉ ุจ **Code Splitting**.

  > ูุฐุง ุงูุฌุงูุจ ูู React Suspense ููุฌูุฏ ููุฏูุฌ **ุจุดูู ุฑุณูู** ูู ููุชุจุฉ React.js ููุฐ ุงูุฅุตุฏุงุฑ 16.6ุ ูุณูุฑู ุจุนุฏ ูููู ููููุฉ ุนููู.

- ุงูุฌุงูุจ ุงูุซุงูู ูู Suspense ููุชู ุจุนุฑุถ ุงูููููุงุช ุจุนุฏ ุฃู ุชุญุตู ุนูู ูุงูุฉ ุงูุจูุงูุงุช ุงูุชู ุชุญุชุงุฌ ุฅูููุง. ูู ุงูุชุธุงุฑ ูุตูู ุชูู ุงูุจูุงูุงุช ูุชู ุนุฑุถ ูููู Fallback ููู ูู ุงูุนุงุฏุฉ ูููู ุนุจุงุฑุฉ ุนู Loader ููู ูููู ุงููุณุชุฎุฏู ุฃู ูุฐุง ุงูุฌุฒุก ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูู ุทูุฑ ุงูุชุญููู.
  > ูุฐุง ุงููุณู ุงูุซุงูู ูู ูุดุฑูุน Suspense **ูุงุฒุงู ูู ุทูุฑ ุงูุชุทููุฑ ูุงูุฅุฎุชุจุงุฑ**ุ ูุงููุงุฌูุงุช ุงูุจุฑูุฌูุฉ ุงูุชู ุณูุฑุงูุง ูู ูุฐุง ุงูููุงู ูุฏ ุชุชุบูุฑ ุจุนุฏ ูุตูู ุงูุฅุตุฏุงุฑ ุงููุณุชูุฑ ูู React Suspense.

ููู ุฃูุฎุต ูุง ุณุจู ูู ูููุชูู: ุงููุณู ุงูุฃูู ูู React Suspense ูุงูุฐู ูู ููุฌูุฏ ุงูุขู ูู ุฅุตุฏุงุฑ React.js ุงูุฑุณูู ููุชู ููุท ุจ **Code Splitting**ุ ุจูููุง ุงููุณู ุงูุซุงูู ููุชู ุจ **Data fetching** ููู ููุง ููุช ูุงุฒุงู ููุฏ ุงูุชุฌุฑุจุฉ ูุงูุชุทููุฑ.

<NewsletterForm />

## ุงุณุชุฎุฏุงู Suspense ูู ุฃุฌู Code Splitting

ุนูุฏูุง ุชุจูุบ ุชุทุจููุงุช ุฏุฑุฌุฉ ูุนููุฉ ูู ุงูุชุนููุฏ ูุฅููุง ุชููู ุจุงูุถุฑูุฑุฉ ูุคููุฉ ูู ุนุฏุฏ ูุจูุฑ ูู ุงูููููุงุชุ ูุฃููุงุฏ ุฌุงูุงุณูุฑูุจุช ูุง ูุณุชูุงู ุจุญุฌููุง ุฎุงุตุฉ ุนู ุงุณุชุฎุฏุงู ุนุฏุฏ ูุจูุฑ ูู ุงูููุชุจุงุช ุงูุฎุงุฑุฌูุฉ. ูุฐูู ุนูุฏูุง ูุญุงูู ุงููุทูุฑ ูู ุงูููุงูุฉ ุชุญุฒูู ุงูุดูุฑุฉ ุงููุตุฏุฑูุฉ ูุฅูู ูุญุตู ุนูู ููู ุฌุงูุงุณูุฑูุจุช ุถุฎู ูุชุณุจุจ ูู ุจุทุก ุชุญููู ุงูุชุทุจูู ุนูู ุงููุชุตูุญ ุฎุงุตุฉ ุฅุฐุง ูุงู ุงูุฅุชุตุงู ุจุงูุฅูุชุฑูุช ุจุทูุฆุง.

ูุญุณู ุงูุญุธ ุงูุชูุช ููุชุจุฉ React.js ุจูุฐู ุงููุงุญูุฉุ ููุถุนุช ุฑูู ุฅุดุงุฑุชูุง ุงููุธููุฉ `React.lazy()`.

ูุฐู ุงูุฏุงูุฉ ุชูุชู ุจุชูุณูู ุญุฒูุฉ (Bundle) ุงูุฌุงูุงุณูุฑูุจุช ุฅูู ุนุฏุฉ ูุทุนุ ูู ูููุง ูุณุคูู ุนู ูููู ูุนูู ูุจูุฌููุฏ ูุง ูุฐูุฑ ุชูุฑูุจุง. ูููู ุจุนุฏ ุฐูู ุงูุฅุณุชุนุงูุฉ ุจ Suspense ูุฅุฏุงุฑุฉ ูุถุนูุฉ ุงูุชุทุจูู ุนูุฏ ุทูุจ ุงููููู (Component) ูุจุงูุชุงูู ูููููุง ูุซูุง ุฅุธูุงุฑ Loader ุจุงูุชุธุงุฑ ุฃู ูุชู ุชุญููู ูุทุนุฉ ุงูููุฏ ุงูุฎุงุตุฉ ุจุฐูู ุงูุฌุฒุก ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู.

### ุฏูุฑ Suspense ูู Code Splitting

ุนูุฏ ุทูุจ ุญุฒูุฉ ุฌุงูุงุณูุฑูุจุชุ ูุนูู ููุง ููู ุฌุงูุงุณูุฑูุจุชุ ูุฅูู ูู ุงูุทุจูุนู ุฃู ูุฃุฎุฐ ุจุนุถ ุงูููุช ููู ูุชู ุชุญูููู ุนุจุฑ ุงูุดุจูุฉ. ูุฐุง ุงูููุช ูุฎุชูู ูู ุญูู ูุขุฎุฑ ุจุญุณู ุณุฑุนุฉ ุงูุฅุชุตุงู ุจุงูุฅูุชุฑูุช. ูุฐูู ููุง ููุช ูููุฑ ููุง `<Suspense />` ุฅููุงููุฉ ุนุฑุถ Loader ูู User Interface ุจุงูุชุธุงุฑ ุฌููุฒูุฉ ุงูููู ุงููุทููุจ.

```jsx
import React, { Suspense } from 'react';

const AboutPage = React.lazy(() => import('./AboutPage'));

const App = () => (
  <Suspense fallback={<Loader />}>
    <AboutPage />
  </Suspense>
);
```

ูู ูุฐุง ุงููุซุงู ุงูุชุฑุถูุง ุฃูู ูุฏููุง ุตูุญุฉ About ููุซูุฉ ุจุงููููู `<AboutPage />`ุ ุจูุฌุฑุฏ ุงูุฏุฎูู ููุชุทุจูู ูุทูุจ ุชูู ุงูุตูุญุฉ ูุฅู React ุณูููู ุจุชุญููู ููุฏ ุฌุงูุงุณูุฑูุจุช ุงููุณุคูู ุนู ุฐูู ุงููููู ูุงูุฐู ูุง ูุฌุฏู ูู ุงูููู ุงูุฑุฆูุณู (Main Bundle) ุงูุฐู ูุชุญูู ูู ุงูุชุทุจูู ููู.

ููุฑุคูุฉ ูุฐุง ุจุดูู ุฃูุถูุ ุฃูุดุฃุช ูุซุงูุง ุจุณูุทุง ุฌุฏุง ุนูู CodeSandbox ูููู ุฃูุดุฃุช ูููููู ุงุซููู: `<HomePage />` ู `<AboutPage />`. ุณุชูุงุญุธูู ููู ูุชู ุชุญููู Javscript Chunks ุนูุฏ ุนุฑุถ ุงููููููู ูุฃูู ูุฑุฉ.

[![Edit React Suspense Demo](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/s/objective-taussig-5uimi?fontsize=14&hidenavigation=1&theme=dark)

ูุงูุตูุฑุฉ ุงูุชุงููุฉ ุชูุถุญ ุงูุฃูุฑ ูุฐูู:

![Code Splitting With React Suspense](../images/suspense-code-splitting.png)

ุงูุขู ุฑุฃููุง ููู ุฃูู ูู ุงูุณูู ุฅุถุงูุฉ ููุฒุฉ Code Splitting ูุชุทุจููุงุช Reactุ ูุงูุชุฌุฑุจุฉ ููุชุงุฒุฉ ุจุญูุซ ูุง ูุญุณ ุฃููุง ุบูุฑ ูุชุฒุงููุฉ (Asynchronous) ุจุงูุฑุบู ูู ุฃููุง ูุฐูู.

ุงูุขู ุญุงู ุงูููุช ููุชููู ุนู ุงูุฌุงูุจ ุงูุฃูู ูุงูุฃูุซุฑ ุชุนููุฏุง ูู ูุดุฑูุน Suspense: ุฌุงูุจ **Data fetching**.

## ุงุณุชุฎุฏุงู Suspense ูู ุฃุฌู Data fetching

ุงูููุฑุฉ ุงูุฑุฆูุณูุฉ ูู ูุฑุงุก ูุดุฑูุน Suspense ูู ุชุฃุฌูู ุนุฑุถ ูููู ูู ููููุงุช ูุงุฌูุฉ ุงููุณุชุฎุฏู ุฅูู ุชุญูู ุดุฑุท ูุนูู. ูู ุงูุชุธุงุฑ ุชุญูู ุฐูู ุงูุดุฑุท ุณูุชู ุนุฑุถ ูููู ูุคูุช ูุฅุฎุจุงุฑ ุงููุณุชุฎุฏู ุจุฃู ููุงู ุดูุก ูุง ูุฌุฑู ุฎูู ุงูููุงููุณ.

ูู ุงูููุฑุฉ ุงูุณุงุจูุฉ ุฑุฃููุง ุจุฃู ุงูุฌุฒุก ุงูุฃูู ูู Suspense ููุชุธุฑ ุฅูู ุญูู ุชุญููู ูุทุนุฉ ุงูููุฏ ุงูุฎุงุตุฉ ุจุงููููู ููุชุญูู ุดุฑุท ุนุฑุถ ูุฐุง ุงูุฃุฎูุฑ. ูููู ูู ุงููุณุชูุจู ูุณุนู ูุฑูู React.js ูุฌุนูู ููุชุธุฑ ุฃู ุดูุฆ ุบูุฑ ูุชุฒุงูู (Asynchronous)ุ ุจูุง ูู ุฐูู ุงูุตูุฑ ูุซูุง ูุงูุจูุงูุงุช ุงููุงุฏูุฉ ูู ุงูุฎุงุฏู ุฅูุฎ...

<NewsletterForm />

### ููุงุฑุจุฉ Render-as-You-Fetch ูุชุฌุฑุจุฉ ุงุณุชุฎุฏุงู ุฃูุถู

ุนูุฏูุง ูุนูู ุนูู ูููู ูุญุชุงุฌ ูุจูุงูุงุช ุฎุงุฑุฌูุฉ ูุฅู ุงูุทุฑููุฉ ุงูุฃูุซุฑ ุดููุนุง ูุนูู Data fetching ูู ูู ุฎูุงู ุงููุธููุฉ `componentDidMount()` ุฃู `useEffect()`. ุชุนุฑู ูุฐู ุงูุทุฑููุฉ ุจ **Fetch-on-Render**ุ ููุฏููุง ุจุนุถ ุงูุณูุจูุงุช ุงูุชู ูุฏ ูุง ูููู ููุง ุจุงูุง ูู ุฃุบูุจ ุงูุฃุญูุงู.

ุนูู ุณุจูู ุงููุซุงูุ ุนูุฏูุง ูุฏุฎู ููููู ุฑุฆูุณู ูุญุชุงุฌ ูุจูุงูุงุช ูู ุงูุฎุงุฑุฌ ูุฅููุง ูุทูุจ ุชูู ุงูุจูุงูุงุช ูู ุฎูุงู `useEffect`ุ ุฃู ุนูุฏูุง ูููู ุงููููู ูุฏ ุนุฑุถ ุจุงููุนู. ุฅูุง ุฃููุง ูููู ุจุนุฑุถ `<Spinner />` ูุซูุง ูู ุงูุชุธุงุฑ ุงูุญุตูู ุนูู Data ููุชู ุนุฑุถ ุงููููู ุจุงููุงูู. ุจุนุฏ ุฐูู ุชุนุงุฏ ููุณ ุงูุนูููุฉ ูุน ุงูููููุงุช ุงููุฑุนูุฉ. ููุง ููุน ูู ูุดูู ูุนุฑู ุจุฑูุฌูุง ุจ **Waterfall problem** ุฃู **ูุดูู ุงูุดูุงู** ุญูุซ ูู ูููุฉ ุชูุชุธุฑ ุฅุชูุงู ุงูุชู ูุจููุง ููู ุชุจุฏุฃุ ูุดููุฉ ูู ุงูุฃุฎูุฑ ูุง ูุดุจู ุงูุดูุงู.

![Waterfall problem](../images/waterfall.png)

ููุชุถุญ ูุฐุง ุงูููุงู ุฌูุฏุงุ ุฏุนููุง ูุฑู ูุฐุง ุงููุซุงู:

```jsx{4-6,22-24}
function ProfilePage() {
  const [user, setUser] = useState(null);

  useEffect(() => {
    fetchUser().then(u => setUser(u));
  }, []);

  if (user === null) {
    return <p>Loading profile...</p>;
  }
  return (
    <>
      <h1>{user.name}</h1>
      <ProfileTimeline />
    </>
  );
}

function ProfileTimeline() {
  const [posts, setPosts] = useState(null);

  useEffect(() => {
    fetchPosts().then(p => setPosts(p));
  }, []);

  if (posts === null) {
    return <h2>Loading posts...</h2>;
  }
  return (
    <ul>
      {posts.map(post => (
        <li key={post.id}>{post.text}</li>
      ))}
    </ul>
  );
}
```

ููุง ูุฏููุง ูููููู ุงุซููู: `<ProfilePage />` ู `<ProfileTimeline />`ุ ูุนูุฏ ุชุดุบูู ูุชุชุจุน ูุฐุง ุงูููุฏ ุณููุงุญุธ ูุง ููู:

1. ูุจุฏ ุจุทูุจ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจุงููุณุชุฎุฏู (user).
2. ููุชุธุฑ.
3. ุงูุญุตูู ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู.
4. ูุจุฏ ุจุทูุจ ุงูููุงุถูุน ุงูุชุงุจุนุฉ ููุฐุง ุงููุณุชุฎุฏู (posts).
5. ููุชุธุฑ.
6. ุงูุญุตูู ุนูู ุงูููุงุถูุน.

ุฅุฐุง ุงุณุชุบุฑู ูุซูุง ูุตูู ุจูุงูุงุช ุจุฑููุงูู ุงููุณุชุฎุฏู 3 ุซูุงูู ููุฐุง ูุนูู ุฃู ุงูุจุฏุก ูู ุนูููุฉ ุฌูุจ ููุงุถูุน ุฐูู ุงููุณุชุฎุฏู ูุง ูุจุฏุฃ ุฅูุง ุจุนุฏ 3 ุซูุงูู! ุนูู ุงูุฑุบู ุฃูู ูู ุงูุฃูุถู ูู ูุงู ุจุงูุฅููุงู ุงูููุงู ุจุงูุนูููุชูู ูุนุง ูู ููุณ ุงูููุชุ ุฃู **ุชูุงุฒูุง** ูููุณ ุชูุงููุง.

ูุฐุง ูุง ูุณูู ุจูุดูู ุงูุดูุงู ๐

### ููู ูุนุงูุฌ Suspense ูุฐุง ุงููุดูู ุ

ูุน ุขููุฉ Suspenseุ ูุญู ูุง ููุชุธุฑ ูุฏูู ุงูุฌูุงุจ ููู ูุจุฏุฃ ูู ุนุฑุถ ุงูููููุ ุจู **ุชุจุฏุฃ ุนูููุฉ ุงูุนุฑุถ ูุจุงุดุฑุฉ ูู ููุณ ุงูููุช** ุงูุฐู ูููู ููู ุจุทูุจ ุงูุจูุงูุงุช ุงูุบูุฑ ูุชุฒุงููุฉ.

> ูุชุฌุฑุจุฉ React Suspense **ูุฌุจ ุฃููุง ุชูุนูู Concurrent Mode** ููุง ุฑุฃููุง ูู [ููุงู ุณุงุจู](/javascript/react-concurrent-mode) ุจุดูู ููุตู.

ูุงุญุธูุง ูุฐุง ุงููุซุงู:

```jsx
// This is not a Promise. It's a special object from our Suspense integration.
const resource = fetchProfileData();

function ProfilePage() {
  return (
    <Suspense fallback={<h1>Loading profile...</h1>}>
      <ProfileDetails />
      <Suspense fallback={<h1>Loading posts...</h1>}>
        <ProfileTimeline />
      </Suspense>
    </Suspense>
  );
}

function ProfileDetails() {
  // Try to read user info, although it might not have loaded yet
  const user = resource.user.read();
  return <h1>{user.name}</h1>;
}

function ProfileTimeline() {
  // Try to read posts, although they might not have loaded yet
  const posts = resource.posts.read();
  return (
    <ul>
      {posts.map(post => (
        <li key={post.id}>{post.text}</li>
      ))}
    </ul>
  );
}
```

ุนูุฏ ุงูุจุฏุก ูู ุนุฑุถ ุงููููู `<ProfilePage />` ูุญุฏุซ ูุง ููู:

1. ุจุฏุฃูุง ูู ุฅุฑุณุงู ุทูุจ ุงูุจูุงูุงุช ุนู ุทุฑูู ุงูุฏุงูุฉ `fetchProfileData()` ุงูุชู ุชุนุทููุง ูุงุฆูุง ุฎุงุตุง ุงุณูู ููุง `resource` ููู ููุณ ุจูุนุฏ ุฃู Promise ููุง ูุฏ ูุจุฏู ูููููุฉ ุงูุฃููู.

2. ููุชุจุฉ React ุชุญุงูู ุนุฑุถ `<ProfilePage />`. ูุฐุง ุงูุฃุฎูุฑ ุฃุจ ููููููู ุงุซููู: `<ProfileDetails />` ู `<ProfileTimeline />`.

3. ุชุญุงูู React ุนุฑุถ ุงููููู `<ProfileDetails />` ูุชุทูุจ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ุนู ุทุฑู ุงูููุฑุฏ resource. ุฅุฐุง ูุงูุช ุงูุจูุงูุงุช ุบูุฑ ุฌุงูุฒุฉ ุจุนุฏ ูุฅูู ูุชู ุชุฌููุฏ ูุฐุง ุงููููู (Suspended) ูุชููู React ุจุชุฌุงูุฒู ูุงููุฑูุฑ ุฅูู ุงูููููุงุช ุงูุฃุฎุฑู ูู ุงูุดุฌุฑุฉ.

4. ุชุญุงูู **ุฑูุงูุช** ุจููุณ ุงูุทุฑููุฉ ุนุฑุถ `<ProfileTimeline />` ูุชุทูุจ ุจูุงูุงุชู ุนู ุทุฑูู `resource.posts.read()` ููุชู ุชุฌููุฏู ูู ุงูุขุฎุฑ ููุถุนู ูู ุญุงูุฉ ุงูุชุธุงุฑุ ุซู ููุฑ ูุนุฑุถ ุชุทุจููุงุช ุฃุฎุฑู ูู ุงูุดุฌุฑุฉ ุฅู ูุฌุฏุช.

5. ูู ูุชู ุฅูุฌุงุฏ ููููุงุช ุฃุฎุฑู ูู ุงูุดุฌุฑุฉุ ุฅุฐู ูุชู ุงูุฑุฌูุน ูููููู `<ProfileDetails />` ุงูุฐู ุณุจู ุชุฌููุฏู ููุจุญุซ ุนู ุฃูุฑุจ ูููู `<Suspense />` ูููู ููุชู ุนุฑุถ ุงู fallback ุงูุฎุงุตุฉ ุจู `<h1>Loading profile...</h1>` ูู ุงูุชุธุงุฑ ุงูุญุตูู ุนูู data.

ุงููุงุฆู **resource** ููุซู ุงูุจูุงูุงุช ุงูุชู ูุฏ ุชููู ุฃู ูุง ุชููู ุฌุงูุฒุฉุ ูุนู ุทุฑูู ุงูุฏุงูุฉ `read()` ูุชู ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงูุช ุงูุจูุงูุงุช ูุฏ ูุตูุช ุจุงููุนู ูุจุงูุชุงูู ุนุฑุถ ูุญุชูู ุงูููููุ ุฃู ุฃููุง ูู ุชุตู ุจุนุฏ ูุจุงูุชุงูู ุชุนููู ูุถุนูุฉ (ุฃู ุชุฌููุฏ) ุงููููู ุฅูู ุญูู ูุตูููุง.

[![Edit agitated-surf-j72ou](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/s/agitated-surf-j72ou?fontsize=14&hidenavigation=1&theme=dark)

ููุงุญุธ ูุฐูู ุฃููุง ุทูุจูุง ุจูุงูุงุช ูู ุงูููููุงุช ูู ููุณ ุงูููุชุ ูุจุฐูู ุชุฎูุตูุง ูู ูุดูู ุงูุดูุงู ุงูุฐู ูุงู ูุชุณุจุจ ูู ุชุฃุฌูู ุทูุจ ุงูุฃุจูุงุก ูุจูุงูุงุชูู ูุญูู ุชูุตู ุขุจุงุฆูู ุจุจูุงูุงุชูู :) ุฃุตุจุญ ุงููู ุงูุขู ููุชุธุฑ ููุงุฑุฏู ูู ููุณ ุงูููุช ุงูุฐู ููุชุธุฑูุง ููู ุงูุขุฎุฑูู.

ููุทุฉ ุฅูุฌุงุจูุฉ ุฃุฎุฑู ูุตุงูุญ Suspense ุฃูู ุฌุนููุง ูุชุฎูุต ูู ุงูุชุนุงุจูุฑ ุงูุดุฑุทูุฉ ุงูุชู ููุชุจูุง ููุชุฃูุฏ ูู ุฃู ุงููููู ูุฏ ุชู ุชุญูููู ุจูุฌุงุญ `if(loaded)...` ูุฃุตุจุญุช ุงููุณุฃูุฉ ุงูุขู ุชุตุฑูุญูุฉ (Declarative) ููุงุถุญุฉ ุฃูุซุฑ.

ูููู Suspense ูุณุงุนุฏูุง ูุซูุฑุง ุญุชู ูู ูุงุญูุฉ ุชุตููู ุงูุจุฑูุงูุฌุ ูุฅุฐุง ุฃุฑุฏูุง ูุซูุง ุฃู ูุธูุฑ ุฏุงุฆูุง `<ProfileDetails />` ู `<ProfileTimeline />` ูู ููุณ ุงูููุช ูุฅู ูู ูุง ุนูููุง ูุนูู ูู ุฃู ูุฒูู `<Suspense />` ุงูุฐู ูุญูู `<ProfileTimeline />` ููููู ุงูููููุงู ูุญุงุทุงู ุจูููู `<Suspense />` ูุงุญุฏ. ููุฐุง ูู ูุธูุฑ ุฃู ููููุง ุฅูุง ุจุนุฏ ุฃู **ูุญุตูุง ููุงููุง** ุนูู ูุงูุฉ ุงูุจูุงูุงุช ูุงูููุงุฑุฏ ุงูุชู ูุญุชุงุฌุงููุง. ุฃู ูููููุง ูุตูููุง ุจุดูู ูุงููุ ูู ุฏุงุฎู `<Suspense />` ุงูุฎุงุต ุจู ุฌูุจุง ุฅูู ุฌูุจุ ุจุฐูู ูู ูููู ุฃู ููููุง ุจุดุฃู ุงูุขุฎุฑุ ูุณูุนุฑุถ ุงููููู ูู ูุฐู ุงูุญุงูุฉ ุญุงููุง ูุชูุตู ุจุงููุนูููุงุช ุงูุชู ูุญุชุงุฌูุง **ูู ููุท**. ูู ูุฐุง ุฏูู ุฃู ููุชุจ ุณุทุฑุง ุจุฑูุฌูุง ูุงุญุฏ ูู ุงุฎุชุฑุงุนูุง.

### ุงูุฏุงูุฉ read

ุงูุฏุงูุฉ `read()` ููุง ููุณุช ูู ุงููุณุคููุฉ ุนู ุฅุทูุงู ุทูุจ ุงูุญุตูู ุนูู ุงูุจูุงูุงุชุ ูู ููุท ุชุญุงูู ูุฑุงุกุฉ ุงูุจูุงูุงุช ุงูุชู ุณุจู ุทูุจูุง ูู ุทุฑู `fetchProfileData()` ููุง ูููุง ูู ุงูุณุงุจู ูุฃูุฏูุง ุนููู.

ุฅุฐุง ููุช ูุถูููุง ูุชุชุทูุน ููุนุฑูุฉ ูุงููุฉ `fetchProfileData()` ูููู ุชููู ุจุฅุฎุจุงุฑ <Suspense /> ุนู ุฌููุฒูุฉ ุงูุจูุงูุงุช ูู ุนุฏููุงุ ููุฐุง ูุซุงู ููุง ูููู ุฃู ุชููู ุนููู:

```js
export function fetchProfileData() {
  let userPromise = fetchUser();
  let postsPromise = fetchPosts();
  return {
    user: wrapPromise(userPromise),
    posts: wrapPromise(postsPromise)
  };
}

// Suspense integrations like Relay implement
// a contract like this to integrate with React.
// Real implementations can be significantly more complex.
// Don't copy-paste this into your project!
function wrapPromise(promise) {
  let status = 'pending';
  let result;
  let suspender = promise.then(
    r => {
      status = 'success';
      result = r;
    },
    e => {
      status = 'error';
      result = e;
    }
  );
  return {
    read() {
      if (status === 'pending') {
        throw suspender;
      } else if (status === 'error') {
        throw result;
      } else if (status === 'success') {
        return result;
      }
    }
  };
}

function fetchUser() {
  console.log('fetch user...');
  return new Promise(resolve => {
    setTimeout(() => {
      console.log('fetched user');
      resolve({
        name: 'Ringo Starr'
      });
    }, 1000);
  });
}

function fetchPosts() {
  console.log('fetch posts...');
  return new Promise(resolve => {
    setTimeout(() => {
      console.log('fetched posts');
      resolve([
        {
          id: 0,
          text: 'I get by with a little help from my friends'
        },
        {
          id: 1,
          text: "I'd like to be under the sea in an octupus's garden"
        },
        {
          id: 2,
          text: 'You got that sand all over your feet'
        }
      ]);
    }, 2000);
  });
}
```

`fetchPosts()` ู `fetchUser()` ูู ูุฌุฑุฏ ุฏุงูุชุงู ุชูููุงู ุจุฅุฑุฌุงุน Promise ุจุนุฏ ุฃู ุชูููุง ุจุทูุจ data. ูุง ููููุง ูุง ูู ุงูุทุฑููุฉ ุฃู ุงูููุชุจุฉ ุงูุชู ุชุณุชุฎุฏูุงููุง ููุนู ุฐููุ ูุฏ ุชููู ุนู ุทุฑูู fetch ุฃู axios ุฃู jquery.. ูุง ููู. ุงูููู ุฃู ุชูููุง ุจุฅุฑุฌุงุน **Promise**.

ูููู ุจุฅุญุงุทุฉ ุงููุนุฏูู ุจุฏุงูุฉ ุณูููุงูุง `wrapPromise()` ูุจุฏุงุฎููุง ูุชู ุงูุนูู ุงูุฃููุ ูุชู ุฅุฑุฌุงุน ุงูุฏุงูุฉ `read()`. ุจุฏุงุฎู ูุฐู ุงูุฏุงูุฉ ูููู ุจุงูุชุฃูุฏ ูู ูููุฉ `status`ุ ุฅุฐุง ุชุญูู ุงููุนุฏ ูุงู ูููุฉ `status` ุชููู `success` ูุจุงูุชุงูู ุชููู `read()` ุจุฅุฑุฌุงุก ุงูุจูุงูุงุช ุงูููุงุฆูุฉ. ุฃูุง ุฅุฐุง ูุงูุช ูููุฉ `status` ุชุณุงูู `error`ุ ุฃู ุฃู ุงููุนุฏ ูู ูุชุญูู ุจุณุจุจ ุฎุทุฃ ุฃู ูุดูู ูุง ููููู ุจุฅุฑุฌุงุน ุฐูู ุงูุฎุทุฃ. ูุงูุฅุญุชูุงู ุงูุชุงูู ู ุงูุฅูุชุฑุงุถู ู ูู ุฃู ุงููุนุฏ ูุง ูุฒุงู ููุฏ ุงููุญุงููุฉ ูุญููุฐุงู ุชููู ูููุฉ `status` ูู `pending`.

ูุฐู ููุฑุฉ ุนูู **Resource** ูู **Suspenseุ** ูุฏ ุชุชุบูุฑ ูุซูุฑ ูู ุงูุชูุงุตูู ู APIs ุงูุชู ุดุฑุญูุงูุง ูู ููุง ุฅูู ุญูู ุงูุฅุตุฏุงุฑ ุงูุฑุณูู ู Concurrent Mode ู Suspense ูููู ุงูููุฑุฉ ุณุชุจูู ููุง ูู.

> ุฌููุน ุงูุฃูุซูุฉ ุฃุนูุงู ูุฃุฎูุฐุฉ ูู **ุชูุซูู ุฑูุงูุช ุงูุฑุณูู**ุ ูุง ุชุชุฑุฏุฏูุง ูู ุงูุฅุทูุงุน ุนููู ูููู ุณุชุฌุฏูู ุฅูุถุงุญุงุช ูุชูุงุตูู ุฃุนูู ุนู ูู ุงูููุงุถูุน ุงูุชู ูุฑุฑูุง ุนูููุง.

## ูู ุงูุฎุชุงู

ุฃุธู ุฃููุง ุงูุขู ููููุง ุงูุฃุณุงุณูุงุช ุงูุชู ูุงู ุนูููุง ูุดุฑูุน Suspenseุ ูุฐุง ุงููุดุฑูุน ุงููุจูุฑ ูุงูุฐู ููุฏุฑุฌ ุถูู ูุดุฑูุน ุฃูุจุฑ ูู React Concurrent Mode ุงูุฐู ุณูุบูุฑ ูุซูุฑุง ูู ูุฌู React.js ูุญู ุงูุฃุญุณู.

**ูุง ุฑุฃููู ุจููุฑุฉ Suspense ุ ูููู ุชุธููู ุจุฃูู ุณูุญุณู ูู ุฌูุฏุฉ ูููุงุกุฉ ุชุทุจููุงุช ุงูููุจ ุงููุจููุฉ ุนูู ุฑูุงูุช ุ ูุฅูู ุฃู ุญุฏ ุณูุณุงุนุฏ ุงููุทูุฑูู ุนูู ุชุญุณูู ุฃุฏุงุก ุชุทุจููุงุชูู ุ**

#### ูุฑุงุฌุน ูููุฉ

- [Suspense for Data Fetching](https://reactjs.org/docs/concurrent-mode-suspense.html)
- [Concurrent UI Patterns](https://reactjs.org/docs/concurrent-mode-patterns.html)
- [Can you feel the Suspense?!](https://react.christmas/2019/5)

<Author slug="aissa" />
